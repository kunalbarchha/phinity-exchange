# Phinity Exchange Services Configuration
# This file contains default configuration for all services
# Copy this file to your deployment directory and modify as needed

# =============================================================================
# JAVA CONFIGURATION
# =============================================================================

# Java Virtual Machine options for all services
# Adjust memory settings based on your system resources
JAVA_OPTS="-Xms512m -Xmx1024m -XX:+UseG1GC -XX:MaxGCPauseMillis=200"

# Additional JVM options (uncomment and modify as needed)
# JAVA_OPTS="$JAVA_OPTS -XX:+HeapDumpOnOutOfMemoryError"
# JAVA_OPTS="$JAVA_OPTS -XX:HeapDumpPath=/tmp/heapdumps"
# JAVA_OPTS="$JAVA_OPTS -Djava.awt.headless=true"
# JAVA_OPTS="$JAVA_OPTS -Dfile.encoding=UTF-8"

# =============================================================================
# SPRING CONFIGURATION
# =============================================================================

# Spring Boot active profile
# Options: local, dev, staging, prod
SPRING_PROFILES_ACTIVE=local

# Spring Boot configuration server (if using Spring Cloud Config)
# SPRING_CLOUD_CONFIG_URI=http://localhost:8888

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# MongoDB Configuration
# MONGODB_HOST=localhost
# MONGODB_PORT=27017
# MONGODB_DATABASE=phinity-admin
# MONGODB_USERNAME=
# MONGODB_PASSWORD=
# MONGODB_AUTH_DATABASE=admin

# Redis Configuration
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_PASSWORD=
# REDIS_DATABASE=0
# REDIS_TIMEOUT=2000

# PostgreSQL Configuration (if used)
# POSTGRES_HOST=localhost
# POSTGRES_PORT=5432
# POSTGRES_DATABASE=phinity
# POSTGRES_USERNAME=postgres
# POSTGRES_PASSWORD=

# InfluxDB Configuration (if used)
# INFLUXDB_URL=http://localhost:8086
# INFLUXDB_TOKEN=
# INFLUXDB_ORG=phinity
# INFLUXDB_BUCKET=trading-data

# =============================================================================
# MESSAGE BROKER CONFIGURATION
# =============================================================================

# Kafka Basic Configuration
KAFKA_BOOTSTRAP_SERVERS=localhost:9092
KAFKA_GROUP_ID=phinity-exchange

# Kafka Producer Configuration (Production Optimized)
KAFKA_PRODUCER_ACKS=all
KAFKA_PRODUCER_RETRIES=2147483647
KAFKA_PRODUCER_BATCH_SIZE=65536
KAFKA_PRODUCER_LINGER_MS=5
KAFKA_PRODUCER_BUFFER_MEMORY=67108864
KAFKA_PRODUCER_COMPRESSION_TYPE=lz4
KAFKA_PRODUCER_ENABLE_IDEMPOTENCE=true
KAFKA_PRODUCER_MAX_IN_FLIGHT=5
KAFKA_PRODUCER_REQUEST_TIMEOUT=30000
KAFKA_PRODUCER_DELIVERY_TIMEOUT=120000

# Kafka Consumer Configuration (Production Optimized)
KAFKA_CONSUMER_AUTO_OFFSET_RESET=earliest
KAFKA_CONSUMER_ENABLE_AUTO_COMMIT=false
KAFKA_CONSUMER_FETCH_MIN_SIZE=50000
KAFKA_CONSUMER_FETCH_MAX_WAIT=500
KAFKA_CONSUMER_MAX_POLL_RECORDS=1000
KAFKA_CONSUMER_SESSION_TIMEOUT=30000
KAFKA_CONSUMER_HEARTBEAT_INTERVAL=3000
KAFKA_CONSUMER_ISOLATION_LEVEL=read_committed

# Kafka Topic Configuration
KAFKA_TOPIC_PARTITIONS=50
KAFKA_REPLICATION_FACTOR=3

# =============================================================================
# SERVICE DISCOVERY CONFIGURATION
# =============================================================================

# Eureka Configuration
# EUREKA_URI=http://localhost:8000/eureka/
# EUREKA_INSTANCE_HOSTNAME=localhost
# EUREKA_PREFER_IP_ADDRESS=true
# EUREKA_LEASE_RENEWAL_INTERVAL=30
# EUREKA_LEASE_EXPIRATION_DURATION=90

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# JWT Configuration
# JWT_SECRET=your-secret-key-here
# JWT_EXPIRATION=86400000
# JWT_REFRESH_EXPIRATION=604800000

# CORS Configuration
# CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080
# CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
# CORS_ALLOWED_HEADERS=*
# CORS_ALLOW_CREDENTIALS=true

# =============================================================================
# EXTERNAL SERVICES CONFIGURATION
# =============================================================================

# Email Service Configuration
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USERNAME=
# SMTP_PASSWORD=
# SMTP_AUTH=true
# SMTP_STARTTLS=true

# SMS Service Configuration
# SMS_PROVIDER=twilio
# SMS_API_KEY=
# SMS_API_SECRET=
# SMS_FROM_NUMBER=

# reCAPTCHA Configuration
# RECAPTCHA_SITE_KEY=your-site-key-here
# RECAPTCHA_SECRET_KEY=your-secret-key-here
# RECAPTCHA_THRESHOLD=0.5

# Google Maps Configuration
# GOOGLE_MAPS_API_KEY=your-google-maps-api-key

# File Storage Configuration
# FILE_STORAGE_TYPE=local
# FILE_STORAGE_PATH=/tmp/phinity-files
# FILE_MAX_SIZE=10MB

# =============================================================================
# TRADING CONFIGURATION
# =============================================================================

# Trading Engine Configuration
# MATCHING_ENGINE_THREADS=4
# ORDER_BOOK_DEPTH=100
# PRICE_PRECISION=8
# QUANTITY_PRECISION=8

# Fee Configuration
# MAKER_FEE_RATE=0.001
# TAKER_FEE_RATE=0.002
# WITHDRAWAL_FEE_RATE=0.0005

# Risk Management
# MAX_ORDER_SIZE=1000000
# MAX_ORDERS_PER_USER=100
# RATE_LIMIT_REQUESTS_PER_MINUTE=60

# =============================================================================
# MONITORING AND LOGGING CONFIGURATION
# =============================================================================

# Logging Configuration
# LOG_LEVEL=INFO
# LOG_PATTERN=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
# LOG_FILE_MAX_SIZE=100MB
# LOG_FILE_MAX_HISTORY=30

# Metrics Configuration
# METRICS_ENABLED=true
# METRICS_EXPORT_INTERVAL=60
# METRICS_TAGS=environment=local,service=phinity-exchange

# Health Check Configuration
# HEALTH_CHECK_INTERVAL=30
# HEALTH_CHECK_TIMEOUT=5

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================

# Connection Pool Configuration
# DB_CONNECTION_POOL_SIZE=20
# DB_CONNECTION_POOL_MAX_IDLE=10
# DB_CONNECTION_POOL_MIN_IDLE=5
# DB_CONNECTION_TIMEOUT=30000

# Cache Configuration
# CACHE_TTL=3600
# CACHE_MAX_SIZE=1000
# CACHE_EVICTION_POLICY=LRU

# Thread Pool Configuration
# ASYNC_CORE_POOL_SIZE=10
# ASYNC_MAX_POOL_SIZE=50
# ASYNC_QUEUE_CAPACITY=100

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================

# Development Mode Settings (only for local/dev profiles)
# DEBUG_MODE=false
# HOT_RELOAD=true
# SWAGGER_ENABLED=true
# ACTUATOR_ENDPOINTS_ENABLED=true

# Test Data Configuration
# LOAD_TEST_DATA=false
# TEST_USER_COUNT=10
# TEST_TRADING_PAIRS=BTC/USDT,ETH/USDT,BNB/USDT

# =============================================================================
# ENVIRONMENT SPECIFIC OVERRIDES
# =============================================================================

# Production specific settings (uncomment for production)
# if [ "$SPRING_PROFILES_ACTIVE" = "prod" ]; then
#     JAVA_OPTS="-Xms2g -Xmx4g -XX:+UseG1GC -XX:MaxGCPauseMillis=100"
#     LOG_LEVEL=WARN
#     DEBUG_MODE=false
#     SWAGGER_ENABLED=false
# fi

# Staging specific settings (uncomment for staging)
# if [ "$SPRING_PROFILES_ACTIVE" = "staging" ]; then
#     JAVA_OPTS="-Xms1g -Xmx2g -XX:+UseG1GC"
#     LOG_LEVEL=INFO
#     LOAD_TEST_DATA=true
# fi

# =============================================================================
# CUSTOM SERVICE CONFIGURATIONS
# =============================================================================

# Service-specific JVM options (uncomment and modify as needed)
# Note: Service names with hyphens are converted to underscores for variable names
EUREKA_SERVICE_SERVICE_OPTS="-Xms128m -Xmx256m"
GATEWAY_SERVICE_SERVICE_OPTS="-Xms256m -Xmx512m"
USER_SERVICE_SERVICE_OPTS="-Xms256m -Xmx512m"
# MARKET_SERVICE_SERVICE_OPTS="-Xms256m -Xmx512m"
# ADMIN_SERVICE_SERVICE_OPTS="-Xms256m -Xmx512m"
# MATCHING_SERVICE_SERVICE_OPTS="-Xms1g -Xmx2g"
# ORDER_SERVICE_SERVICE_OPTS="-Xms512m -Xmx1g"
# TRADINGVIEW_SERVICE_SERVICE_OPTS="-Xms256m -Xmx512m"
# WALLET_SERVICE_SERVICE_OPTS="-Xms512m -Xmx1g"
# WEBSOCKET_SERVICE_SERVICE_OPTS="-Xms512m -Xmx1g"

# =============================================================================
# NOTES
# =============================================================================

# 1. This file is sourced by deploy.sh, so use bash syntax
# 2. Environment variables take precedence over these settings
# 3. Copy this file to your deployment directory before customizing
# 4. Restart services after modifying this file
# 5. Use quotes for values containing spaces or special characters
# 6. Comment out unused configurations to avoid conflicts